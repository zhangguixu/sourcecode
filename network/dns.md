# DNS

## 概述

域名系统(Domain Name System)是因特网的一项服务。它作为将域名和IP地址相互映射的一个分布式数据库，能够使人更方便地访问互联网。

## 记录类型

### 域名服务器记录类型列表

1. 主机记录（A记录）

    用于名称解析的重要记录，将特定的主机名映射到对应主机的IP地址上。

2. 别名记录（CNAME记录）

    用于将某个别名指向某个A记录上，这样就不需要再为某个新名字另外创建一条新的A记录

3. IPv6主机记录（AAAA记录）

    与A记录对应，用于将特定的主机名映射到一个主机的IPv6地址。

4. 服务位置记录（SRV记录）

    用于定义提供特定服务的服务器的位置，如主机、端口等

5. NAPTR记录

    提供了正则表达式方式去映射一个域名。

## 技术实现

### 域名解析

#### DNS查询方式

1. 递归

    DNS客户端设置使用的DNS服务器一般都是递归服务器，它负责全权处理客户端的DNS查询请求，知道返回最终结果。

2. 迭代

    DNS服务器之间一般采用迭代查询方式

### DNS查询过程

以查询`zh.wikipedia.org`为例

1. 客户端发送查询报文`query zh.wikipedia.org`至DNS服务器

2. DNS服务器

    1. 首先检查自身缓存，如果存在记录则直接返回结果

    2. 如果记录老化或不存在，则继续进行3

3. DNS服务器向`根域名服务器`发送查询报文`query zh.wikipedia.org`，根域名服务器返回`.org`域的权威域名服务器地址，这一级首先返回的是顶级域名的权威域名服务器。

4. DNS服务器向`.org`域的权威域名服务器发送查询报文`query zh.wikipedia.org`，得到`.wikipedia.org`域的权威域名服务器地址

5. DNS服务器向`.wikipedia.org`域的权威域名服务器发送查询报文`query zh.wikipedia.org`，得到主机zh的A记录，存入自身缓存并返回客户端。

### WHOIS

一个域名的所有者可以通过查询WHOIS数据库而被找到；对于大多数根域名服务器，基本的WHOIS由ICANN维护，而WHOIS的细节则由控制那个域的域注册机构维护。

以上来源自[维基百科](https://zh.wikipedia.org/wiki/%E5%9F%9F%E5%90%8D%E7%B3%BB%E7%BB%9F)